ファイル暗号化支援ソフト（通称　Ｓ3Ｅ）


【1.はじめに】------------------------------------------------------------------

この「ファイル暗号化支援ソフト（Simple and Secure Software for Encryption）
（通称　Ｓ3Ｅ）」は、GnuPGを使用してファイルの圧縮暗号化を簡単に行うための
支援ソフトです。
選択された複数のファイルをtar.gz(tgz)フォーマットで１ファイルにまとめて圧縮し、
GnuPGで暗号化します。


【2.作者】----------------------------------------------------------------------
このソフトウェアは以下の3者が個人として、共同でアイディアとリソースを出し合い
作成したものです。

堀口　裕正 (hiromasa-tky@umin.ac.jp)
藤森　研司　(fujimori@med.hokudai.ac.jp)
石川ベンジャミン光一 (kishikaw@ncc.go.jp)


【3.ライセンス】----------------------------------------------------------------

  GNU 一般公衆利用許諾契約書(GNU General Public License:GPL) Version 3

  「S3E」には、"GNU 一般公衆利用許諾契約書(GNU General Public License:GPL) Version 3"
  (以下GNU GPL)を適用します。このライセンスは次のような特徴を持ちます。

  ・ソースコードが公開されている 
  ・誰でも自由にプログラムの複製、頒布、改変ができる 
  ・派生するソフトウェアにもGNU GPLを適用しなければならない 
  ・GNU GPLのより詳しい内容はCOPYING.txt(英文)をご覧ください。

  他の団体・プロジェクト等で作成されたプログラムについて

  このパッケージには、本プログラムを使用するために必要なもので、他の団体・
  プロジェクト等で作成されたプログラムも同梱されています。
  これらのプログラムの著作権は、それぞれのプログラムの作者が保有しています。
  改変・再配布等の条件はそれぞれのプログラムのライセンスに従ってください。

  同梱プログラム
  ・tar32.dll	 http://openlab.ring.gr.jp/tsuneo/soft/tar32_1/
  ・GnuPG			 http://www.gnupg.org/download/
  ・Qt				 http://www.qtsoftware.com/downloads-jp

1) tar32.dll(Ver0.53)
   吉岡　恒夫さんが開発されたファイルアーカイブ用DLL。

2) GnuPG(Version 1.4.9)
   GNU Privacy Guard (GnuPG)は Pretty Good Privacy (PGP) の別実装として、
   GPL に基づいた暗号化ソフト。OpenPGP 規格 (RFC2440) に完全準拠。

3) Qt(キュート)(Version 4.5.1)
   ノルウェーのQtソフトウェア社によって開発された、C++言語で書かれたクロス・
   プラットフォームGUIツールキット。オープンソース版のライセンスはGPL。


【4.アーカイブ内容】------------------------------------------------------------
  help.html									ヘルプ・ファイル
  INSTALL.bat								インストール・バッチ・ファイル
  makeShortCut.wsf					ショートカット作成用スクリプト・ファイル
  S3E.exe										本アプリケーション本体
  S3E.ini										本アプリケーションのiniファイル
  QtCore4.dll								Qtのダイナミック・リンク・ライブラリ
  QtGui4.dll								Qtのダイナミック・リンク・ライブラリ
  mingwm10.dll							Qtのダイナミック・リンク・ライブラリ
  TAR32.DLL									tar.gz圧縮用ダイナミック・リンク・ライブラリ
  S3E.qm										日本語用言語ファイル

pluginsフォルダ
  Qtプラグイン

srcフォルダ
  本プログラムのソースファイル
  
csrcフォルダ
  tar32_1-20090305-010003.tar.gz			tar32.dllソース
  gnupg-w32cli-1.4.9.exe							GnuPGソース
  qt-win-opensource-4.5.1-mingw.exe		Qtソース

docフォルダ
  readme.txt								このファイル
  COPYING.txt								GNU 一般公有使用許諾書
	GnuPG暗号化コマンド抜粋.txt
	GnuPG復号化コマンド抜粋.txt


【5.インストール方法】----------------------------------------------------------

1) S3E.zipファイルの上でマウス右クリックします。

2) すべて展開を選択します。

3) 展開ウィザードが開きますので、次へボタンを押下します。

4) ファイル展開先フォルダは、c:\Program Files等適当なローカルフォルダを選択し、
次へボタンを押下します。
※ネットワーク上のフォルダに展開するとインストールできません。

5) 完了ボタンを押下します。

6) 展開されたフォルダ内の「INSTALL.bat」（拡張子が表示されない設定の場合は「INSTALL」
と表示されます）をダブルクリックすると、最初にGnuPGのインストーラが起動します。
  （S3Eを動作させるには、GnuPGをインストールする必要があります。）

7) セットアップウイザードが表示されるので、以下の手順でセットアップします。

 ・GnuPG version 1.4.9 というバージョン表示を確認し → NEXTボタンを押下する。
 ・ライセンス合意画面表示 → NEXTボタンを押下する。（すでにGnuPGがインストール済みの場合はCANCELを押下）
 ・コンポーネント選択画面表示 → そのままNEXTボタンを押下する。
 ・言語選択画面表示 → ja-Japaneseまたはen-Englishを選択しNEXTボタンを押下する。
 ・インストールフォルダ選択画面表示 → デフォルトのままとする。
    32ビット版OS → C:\Program Files\GNU\GnuPG
    64ビット版OS → C:\Program Files (x86)\GNU\GnuPG

   注意：インストールフォルダを変更した場合は、
         本アプリケーションの iniファイルに、その旨記述する必要があります。

 ・インストール完了画面表示 → セットアップ正常終了（successfully）を確認しNEXTボタンを押下する。
 ・Finishボタンを押下する。
 セットアップウイザードが閉じ、GnuPGのインストールは終了です。

8) 「デスクトップにショートカットを作成しますか(Y/N)? と表示されますので、作成する場合は「Y」を入力してください。
 セキュリティの警告が表示された場合は、「今回は許可」を選択してください。
 
9) 「ユーザ情報を設定してください。」と表示されます。
 OKをクリックするとユーザ情報設定画面が表示されます。

10) 利用者の情報を入力して、OKをクリックするとメイン画面が表示されます。
  (ユーザ情報がiniファイルにプリセットされている場合は、表示内容を確認してOKをクリックしてください)


【6.起動方法】------------------------------------------------------------------

ショートカット「ファイル暗号化支援ソフト(S3E)」またはS3E.exeをダブルクリックして起動します。


【7.ファイル仕様】--------------------------------------------------------------

暗号化ファイルおよびレシートファイルは、下記の命名規則で作成されます。

暗号化ファイル   : ID_yyyymmddhhmmss.tgz.gpg
レシートファイル : ID_yyyymmddhhmmss.txt
  (IDは、ユーザ情報設定画面で設定したID。yyyymmddhhmmssは、暗号化を実行した年月日時分秒)

レシートファイルには、暗号化後のファイル名（EF）、ファイルサイズ（FS）、対象ファイル名（IF）が記載されます。


【8.内部使用コマンド】----------------------------------------------------------

本プログラム内部で使用する、tarおよびgpgコマンドは下記のとおりです。

tar cfz fileName.tgz tmpDirName         tar.gz圧縮
gpg -n --verbose --import filePath      インポート済みかどうかのチェック
gpg --verbose --import filePath         公開鍵インポート
gpg --fingerprint keyid                 公開鍵の指紋読み取り
gpg --list-sigs keyid                   公開鍵の署名読み取り
gpg --batch --yes --delete-keys keyid   公開鍵の削除
cmd.exe /c echo y | gpg --command-fd 0 --encrypt --recipient keyid filePath  暗号化


【9.iniファイル内容】-----------------------------------------------------------

1)GnuPGのパス

[PathToGnuPG]
PathToGnuPG=c:/Program Files/gnu/gnupg/gpg.exe

GnuPGのパスが記述されています。
GnuPGを別フォルダへインストールした場合は、この記述を変更してください。


2)プリセットユーザ情報（省略可）

[PresetUserInformation]
Name=XXXXXXXXXXX
ID=999999999

プリセットユーザ情報を記述することができます。
インストール時に記述内容が初期値としてプリセットされます。
XXXXXXXXXXX : ユーザ名
999999999 : ID


3)プリセット送付先情報（省略可）

[PresetRecipientInformation]
Count=1
PublicKeyTitle1=XXXXXXXXXXX
PublicKeyFile1=xxxxxxx.asc
IsRecipient1=1

プリセット送付先情報を記述することができます。
インストール時に記述内容が初期値としてプリセットされます。
XXXXXXXXXXX : プリセットする送付先名称
xxxxxxx.asc : プリセットする公開鍵ファイル名
IsRecipient1=1とすると、送付先リストに表示されます。
IsRecipient1=0とすると、送付先リストに表示されません。第三者が署名した公開鍵を
プリセットする場合、署名を行った第三者の公開鍵もインポートする必要があります。
（インポートしないと、送付先設定画面の署名欄に[ユーザーIDがみつかりません]と
表示されます）
署名を行った第三者を、送付先リストに記載する必要がない場合は、IsRecipient1=0を
指定してください。


【10.アンインストール方法】----------------------------------------------------------
GnuPG、S3Eを両方ともアンインストール方法は以下のとおりです。

1) GnuPGインストール・フォルダ内の uninst-gnupg.exe をダブルクリックすると
GnuPGのアンインストール・ウィザードが開始します。

2) S3Eフォルダおよびデスクトップのショートカット「ファイル暗号化支援ソフト(S3E)」を
削除します。

GnuPG管理下の鍵情報も削除する場合は、下記のフォルダを削除します。
C:\Documents and Settings\[ユーザー]\Application Data\gnupg

（注意）GnuPG管理下の鍵情報を削除すると、秘密鍵も削除されます。
